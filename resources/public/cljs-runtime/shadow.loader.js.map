{
"version":3,
"file":"shadow.loader.js",
"lineCount":86,
"mappings":"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",
"sources":["shadow/loader.js"],
"sourcesContent":["goog.provide(\"shadow.loader\");\ngoog.require(\"goog.module.ModuleManager\");\ngoog.require(\"goog.module.ModuleLoader\");\ngoog.require(\"goog.object\");\ngoog.require(\"goog.html.uncheckedconversions\");\ngoog.require(\"goog.string.Const\");\n\n// this is written in JS so it doesn't depend on cljs.core\n\nshadow.loader.ml = new goog.module.ModuleLoader();\nshadow.loader.ml.setSourceUrlInjection(true);\n\nshadow.loader.mm = goog.module.ModuleManager.getInstance();\nshadow.loader.mm.setLoader(shadow.loader.ml);\n\nshadow.loader.initCalled = false;\n\nshadow.loader.init = function(uriPrefix) {\n  if (shadow.loader.initCalled) {\n    throw new Error(\"shadow.loader.init was already called! If you are calling it manually set :module-loader-init false in your config.\");\n  }\n\n  if (goog.global.shadow$modules) {\n    var mm = shadow.loader.mm;\n    mm.setAllModuleInfo(goog.global.shadow$modules[\"infos\"]);\n\n    var uris = goog.global.shadow$modules[\"uris\"];\n\n    // this is absurd. the uris are generated by the compiler. should be trusted already.\n    // I would really like to know how Google integrates this data into their builds\n    var trustReason = goog.string.Const.from(\"generated by compiler\");\n\n    goog.object.getKeys(uris).forEach(function(key) {\n      var module_uris = uris[key];\n      if (module_uris.length == 0) {\n        // default module is added without uris since it will always be loaded\n        // when this is called\n        mm.getModuleInfo(key).setLoaded();\n      } else {\n        var trusted_uris = [];\n        module_uris.forEach(function(module_uri) {\n          var trusted = goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract(\n            trustReason,\n            uriPrefix + module_uri\n          );\n          trusted_uris.push(trusted);\n        });\n        mm.getModuleInfo(key).setTrustedUris(trusted_uris);\n      }\n    });\n\n    shadow.loader.initCalled = true;\n  }\n};\n\nshadow.loader.getModuleManager = function() {\n  return shadow.loader.mm;\n};\n\nshadow.loader.getModuleLoader = function() {\n  return shadow.loader.ml;\n};\n\n// allow calling (shadow.loader/load :with-a-keyword)\nshadow.loader.string_id = function(id) {\n  var result = id.toString();\n  if (result.charAt(0) == \":\") {\n    result = result.substring(1);\n  }\n  return result;\n};\n\nshadow.loader.set_load_start = function(id) {\n  shadow.loader.mm.beforeLoadModuleCode(id);\n};\n\n// FIXME: id no longer required, just keeping it in case someone ends up using old closure lib\nshadow.loader.set_loaded = function(id) {\n  shadow.loader.mm.setLoaded(id);\n};\n\n// ignored. only for cljs.loader compat\nshadow.loader.set_loaded_BANG_ = function() {};\n\nshadow.loader.loaded_QMARK_ = function(id) {\n  return shadow.loader.mm.getModuleInfo(shadow.loader.string_id(id)).isLoaded();\n};\n\nshadow.loader.with_module = function(\n  moduleId,\n  fn,\n  opt_handler,\n  opt_noLoad,\n  opt_userInitiated,\n  opt_preferSynchronous\n) {\n  return shadow.loader.mm.execOnLoad(\n    shadow.loader.string_id(moduleId),\n    fn,\n    opt_handler,\n    opt_noLoad,\n    opt_userInitiated,\n    opt_preferSynchronous\n  );\n};\n\nshadow.loader.load = function(id, cb) {\n  id = shadow.loader.string_id(id);\n  if (cb) {\n    shadow.loader.mm.execOnLoad(id, cb);\n  }\n  return shadow.loader.mm.load(id);\n};\n\nshadow.loader.load_multiple = function(ids, opt_userInitiated) {\n  return shadow.loader.mm.loadMultiple(ids, opt_userInitiated);\n};\n\nshadow.loader.prefetch = function(id) {\n  shadow.loader.mm.prefetchModule(shadow.loader.string_id(id));\n};\n\nshadow.loader.preload = function(id) {\n  return shadow.loader.mm.preloadModule(shadow.loader.string_id(id));\n};\n\n// FIXME: not sure these should always be exported\ngoog.exportSymbol(\"shadow.loader.with_module\", shadow.loader.with_module);\ngoog.exportSymbol(\"shadow.loader.init\", shadow.loader.init);\ngoog.exportSymbol(\"shadow.loader.load\", shadow.loader.load);\ngoog.exportSymbol(\"shadow.loader.load_multiple\", shadow.loader.load_multiple);\ngoog.exportSymbol(\"shadow.loader.prefetch\", shadow.loader.prefetch);\ngoog.exportSymbol(\"shadow.loader.preload\", shadow.loader.preload);\n"],
"names":["goog","provide","require","shadow","loader","ml","module","ModuleLoader","setSourceUrlInjection","mm","ModuleManager","getInstance","setLoader","initCalled","init","shadow.loader.init","uriPrefix","Error","global","shadow$modules","setAllModuleInfo","uris","trustReason","string","Const","from","object","getKeys","forEach","key","module_uris","length","getModuleInfo","setLoaded","trusted_uris","module_uri","trusted","html","uncheckedconversions","trustedResourceUrlFromStringKnownToSatisfyTypeContract","push","setTrustedUris","getModuleManager","shadow.loader.getModuleManager","getModuleLoader","shadow.loader.getModuleLoader","string_id","shadow.loader.string_id","id","result","toString","charAt","substring","set_load_start","shadow.loader.set_load_start","beforeLoadModuleCode","set_loaded","shadow.loader.set_loaded","set_loaded_BANG_","shadow.loader.set_loaded_BANG_","loaded_QMARK_","shadow.loader.loaded_QMARK_","isLoaded","with_module","shadow.loader.with_module","moduleId","fn","opt_handler","opt_noLoad","opt_userInitiated","opt_preferSynchronous","execOnLoad","load","shadow.loader.load","cb","load_multiple","shadow.loader.load_multiple","ids","loadMultiple","prefetch","shadow.loader.prefetch","prefetchModule","preload","shadow.loader.preload","preloadModule","exportSymbol"]
}

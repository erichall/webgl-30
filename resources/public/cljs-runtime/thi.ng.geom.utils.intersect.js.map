{"version":3,"sources":["thi/ng/geom/utils/intersect.cljc"],"mappings":"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","names":["thi.ng.geom.utils.intersect/sq","x","var_args","G__28872","thi.ng.geom.utils.intersect/intersect-circle-circle?","js/Error","p__28874","p__28875","map__28877","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","map__28881","p","r1","q","r2","thi.ng.geom.utils.intersect.intersect_circle_circle_QMARK_.cljs$core$IFn$_invoke$arity$4","delta","thi.ng.math.core._.cljs$core$IFn$_invoke$arity$2","d","thi.ng.math.core/mag","G__28893","thi.ng.math.core/abs*","a","invd","thi.ng.math.core/madd","h","G__28896","Math/sqrt","perp","thi.ng.math.core._STAR_.cljs$core$IFn$_invoke$arity$2","thi.ng.geom.core.normal.cljs$core$IFn$_invoke$arity$1","thi.ng.math.core._PLUS_.cljs$core$IFn$_invoke$arity$2","G__28908","thi.ng.geom.utils.intersect/intersect-rect-rect?","p__28910","p__28911","map__28913","vec__28914","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","vec__28917","map__28920","vec__28921","vec__28924","p__28929","p__28930","p__28931","p__28932","vec__28933","vec__28936","vec__28939","vec__28942","px","py","w","qx","qy","qw","qh","px1","py1","qx1","qy1","px2","py2","qx2","qy2","G__28947","thi.ng.geom.utils.intersect/intersect-rect-circle?","p__28950","p__28951","map__28952","map__28953","p__28957","p__28958","p__28959","vec__28960","vec__28963","vec__28966","sz","s","r","thi.ng.geom.utils.intersect.intersect_rect_circle_QMARK_.cljs$core$IFn$_invoke$arity$4","cx","cy","ds","G__28970","thi.ng.geom.utils.intersect/intersect-aabb-aabb?","p__28972","p__28973","map__28974","map__28975","pa","sa","pb","sb","thi.ng.geom.utils.intersect.intersect_aabb_aabb_QMARK_.cljs$core$IFn$_invoke$arity$4","qa","qb","G__28980","thi.ng.geom.utils.intersect/intersect-aabb-sphere?","p__28985","p__28986","map__28987","map__28988","p__28992","p__28993","p__28994","vec__28995","vec__28998","vec__29001","thi.ng.geom.utils.intersect.intersect_aabb_sphere_QMARK_.cljs$core$IFn$_invoke$arity$4","pz","qz","cz","p__29004","vec__29005","thi.ng.geom.utils.intersect/intersect-aabb-frustum?","size","planes","vec__29008","cljs.core.reduce.cljs$core$IFn$_invoke$arity$3","p__29012","vec__29013","vec__29016","res","nx","ny","nz","vx","vy","vz","cljs.core/reduced","G__29021","thi.ng.geom.utils.intersect/intersect-sphere-sphere?","p__29024","p__29025","map__29027","map__29028","p1","p2","thi.ng.geom.utils.intersect.intersect_sphere_sphere_QMARK_.cljs$core$IFn$_invoke$arity$4","thi.ng.geom.core/dist-squared","G__29034","thi.ng.geom.utils.intersect/intersect-ray-sphere?","p__29035","p__29036","map__29038","map__29039","rp","dir","thi.ng.geom.utils.intersect.intersect_ray_sphere_QMARK_.cljs$core$IFn$_invoke$arity$4","thi.ng.math.core/mag-squared","v","thi.ng.math.core.dot.cljs$core$IFn$_invoke$arity$2","b","thi.ng.geom.utils.intersect/intersect-ray-triangle3?","c","u","n","thi.ng.math.core/cross","thi.ng.geom.vector/V3","w0","a'","b'","thi.ng.math.core.delta_EQ_.cljs$core$IFn$_invoke$arity$2","vec__29042","i","thi.ng.geom.utils.triangle_barycentric_coords.cljs$core$IFn$_invoke$arity$6","thi.ng.math.core.in_range_QMARK_.cljs$core$IFn$_invoke$arity$3","thi.ng.geom.utils.intersect/triaabb-axis-test","pa1","pb1","pa2","pb2","fa","fb","vec__29045","min","max","rad","p__29051","p__29052","p__29053","p__29054","p__29055","vec__29056","vec__29059","vec__29062","vec__29065","vec__29068","thi.ng.geom.utils.intersect/triaabb-edge-test-e0","ax","ay","az","bx","by","bz","ex","ey","ez","e","sx","sy","vec__29071","fx","fy","fz","thi.ng.math.core/abs","p__29074","p__29075","p__29076","p__29077","p__29078","vec__29079","vec__29082","vec__29085","vec__29088","vec__29091","thi.ng.geom.utils.intersect/triaabb-edge-test-e1","vec__29094","p__29101","p__29102","p__29103","p__29104","p__29105","vec__29106","vec__29109","vec__29112","vec__29115","vec__29118","thi.ng.geom.utils.intersect/triaabb-edge-test-e2","vec__29121","thi.ng.geom.utils.intersect/triaabb-edge-minmax","x__4276__auto__","y__4277__auto__","x__4273__auto__","y__4274__auto__","thi.ng.geom.utils.intersect/intersect-triangle3-aabb?","vec__29131","vec__29134","vec__29137","vec__29140","e0","e1","G__29143","G__29144","G__29145","thi.ng.geom.utils.intersect/intersect-plane-aabb?","p__29147","p__29148","p__29149","p__29150","vec__29151","vec__29154","vec__29157","vec__29160","thi.ng.geom.utils.intersect/intersect-line2-line2?","lp","lq","dx1","dy1","dx2","dy2","dx12","dy12","denom","na","nb","ip","thi.ng.geom.utils/closest-point-on-segment","iq","or__4185__auto__","ua","ub","thi.ng.math.core.mix.cljs$core$IFn$_invoke$arity$3","thi.ng.geom.utils.intersect/intersect-line2-edges?","rq","edges","cljs.core.transduce.cljs$core$IFn$_invoke$arity$4","cljs.core.comp.cljs$core$IFn$_invoke$arity$2","cljs.core.map.cljs$core$IFn$_invoke$arity$1","p__29168","vec__29169","p1__29167#","cljs.core.filter.cljs$core$IFn$_invoke$arity$1","cljs.core.completing.cljs$core$IFn$_invoke$arity$1","closest","isec","thi.ng.math.core/INF+","cljs.core/first","thi.ng.geom.utils.intersect/intersect-ray2-edges?","rd","thi.ng.geom.utils.intersect/intersect-plane-plane?","an","aw","bn","bw","thi.ng.math.core.delta_EQ_.cljs$core$IFn$_invoke$arity$3","thi.ng.math.core/*eps*","od","det","thi.ng.geom.utils.ortho_normal.cljs$core$IFn$_invoke$arity$2","thi.ng.geom.utils.intersect/intersect-ray-plane?","dp","dn","du","G__29174","p__29175","p__29176","p__29177","vec__29178","vec__29181","vec__29184","s2","thi.ng.geom.utils.intersect.intersect_plane_aabb_QMARK_.cljs$core$IFn$_invoke$arity$3","vec__29187","vec__29190","vec__29193","vx1","vx2","vy1","vy2","vz1","vz2","thi.ng.geom.utils.intersect/intersect-plane-sphere?","G__29197","thi.ng.geom.utils.intersect/subdot","thi.ng.math.core/subm","thi.ng.geom.utils.intersect/face-a","f","deltas","aff","cljs.core.mapv.cljs$core$IFn$_invoke$arity$2","thi.ng.geom.utils.intersect/face-b1?","p1__29204#","cljs.core/every?","thi.ng.geom.utils.intersect/face-b2?","verts","refv","p1__29205#","thi.ng.geom.utils.intersect/edge-a","ma","mb","ea","eb","xa","xb","edge","j","cp","cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2","thi.ng.geom.utils.intersect/get-edge","epoints","id","ep","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","thi.ng.geom.utils.intersect/check-faces-a","specs","masks","affine","vec__29235","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","vec__29238","vec__29241","vec__29244","m","p1__29217#","p1__29218#","cljs.core.conj.cljs$core$IFn$_invoke$arity$2","cljs.core/next","thi.ng.geom.utils.intersect/check-faces-b","vec__29258","vec__29261","vec__29264","p__29270","p__29271","vec__29273","vec__29276","thi.ng.geom.utils.intersect/intersect-tetrahedra?","pc","pd","qc","qd","p1__29267#","cljs.core.map.cljs$core$IFn$_invoke$arity$2","cljs.core.reduce.cljs$core$IFn$_invoke$arity$2","cljs.core/bit-or","p1__29268#"],"sourcesContent":["(ns thi.ng.geom.utils.intersect\n  #?(:cljs\n     (:require-macros\n      [thi.ng.math.macros :as mm]))\n  (:require\n   [thi.ng.geom.core :as g]\n   [thi.ng.geom.utils :as gu]\n   [thi.ng.geom.vector :as v :refer [vec2 vec3 V2 V3]]\n   [thi.ng.math.core :as m :refer [*eps*]]\n   #?(:clj [thi.ng.math.macros :as mm])))\n\n(declare intersect-plane-aabb?)\n\n(defn- sq [x] (* x x))\n\n(defn intersect-circle-circle?\n  ([{p :p r1 :r} {q :p r2 :r}]\n   (intersect-circle-circle? p r1 q r2))\n  ([p r1 q r2]\n   (let [delta (m/- q p)\n         d (m/mag delta)]\n     (when (and (<= d (+ r1 r2)) (>= d (m/abs* (- r1 r2))))\n       (let [a (/ (+ (- (* r1 r1) (* r2 r2)) (* d d)) (* 2.0 d))\n             invd (/ 1.0 d)\n             p (m/madd delta (* a invd) p)\n             h (Math/sqrt (- (* r1 r1) (* a a)))\n             perp (m/* (g/normal delta) (* h invd))]\n         [(m/+ p perp) (m/- p perp)])))))\n\n(defn intersect-rect-rect?\n  ([{[px py] :p [w h] :size} {[qx qy] :p [qw qh] :size}]\n   (not (or (> px (+ qx qw)) (> qx (+ px w)) (> py (+ qy qh)) (> qy (+ py h)))))\n  ([[px1 py1] [qx1 qy1] [px2 py2] [qx2 qy2]]\n   (not (or (> px1 qx2) (> px2 qx1) (> py1 qy2) (> py2 qy1)))))\n\n(defn intersect-rect-circle?\n  ([{p :p sz :size} {s :p r :r}]\n   (intersect-rect-circle? p (m/+ p sz) s r))\n  ([[px py] [qx qy] [cx cy] r]\n   (let [ds (if (< cx px) (sq (- cx px)) (if (> cx qx) (sq (- cx qx)) 0.0))\n         ds (+ ds (if (< cy py) (sq (- cy py)) (if (> cy qy) (sq (- cy qy)) 0.0)))]\n     (<= ds (* r r)))))\n\n(defn intersect-aabb-aabb?\n  ([{pa :p sa :size} {pb :p sb :size}]\n   (intersect-aabb-aabb? pa pb (m/+ pa sa) (m/+ pb sb)))\n  ([pa pb qa qb]\n   (if (and (<= (pa 0) (qb 0)) (<= (pb 0) (qa 0)))\n     (if (and (<= (pa 1) (qb 1)) (<= (pb 1) (qa 1)))\n       (and (<= (pa 2) (qb 2)) (<= (pb 2) (qa 2)))))))\n\n;; Source: Graphics Gems 2 / SO:\n;; http://stackoverflow.com/questions/4578967\n\n(defn intersect-aabb-sphere?\n  ([{p :p sz :size} {s :p r :r}]\n   (intersect-aabb-sphere? p (m/+ p sz) s r))\n  ([[px py pz] [qx qy qz] [cx cy cz] r]\n   (let [ds (if (< cx px) (sq (- cx px)) (if (> cx qx) (sq (- cx qx)) 0.0))\n         ds (+ ds (if (< cy py) (sq (- cy py)) (if (> cy qy) (sq (- cy qy)) 0.0)))\n         ds (+ ds (if (< cz pz) (sq (- cz pz)) (if (> cz qz) (sq (- cz qz)) 0.0)))]\n     (<= ds (* r r)))))\n\n(comment\n  ;; example usage\n\n  (isec/intersect-aabb-frustum?\n   box-p box-size\n   (mat/frustum-planes view-mat proj-mat)))\n\n;; https://groups.google.com/forum/#!topic/comp.graphics.algorithms/M6lvyWC6PqU\n\n(defn intersect-aabb-frustum?\n  \"Takes 2 vectors defining an AABB (min-p & size) and a seq of plane\n  parameters (each element [normal w]). The plane normals must be\n  pointing *inwards*. Returns :inside, :intersect or :outside\"\n  [[px py pz :as p] size planes]\n  (let [[qx qy qz] (m/+ p size)]\n    (reduce\n     (fn [res [[nx ny nz] w]]\n       (let [vx (if (pos? nx) px qx)\n             vy (if (pos? ny) py qy)\n             vz (if (pos? nz) pz qz)]\n         (if (pos? (mm/madd nx vx ny vy nz vz w))\n           (reduced :outside)\n           (let [vx (if (pos? nx) qx px)\n                 vy (if (pos? ny) qy py)\n                 vz (if (pos? nz) qz pz)]\n             (if (pos? (mm/madd nx vx ny vy nz vz w))\n               :intersect\n               res)))))\n     :inside planes)))\n\n(defn intersect-sphere-sphere?\n  ([{p1 :p r1 :r} {p2 :p r2 :r}]\n   (intersect-sphere-sphere? p1 r1 p2 r2))\n  ([p1 r1 p2 r2]\n   (<= (g/dist-squared p1 p2) (mm/addm r1 r2 r1 r2))))\n\n(defn intersect-ray-sphere?\n  ([{rp :p dir :dir} {p :p r :r}]\n   (intersect-ray-sphere? rp dir p r))\n  ([rp dir p r]\n   (let [q (m/- p rp)\n         ds (m/mag-squared q)\n         v (- (m/dot q dir))\n         d (mm/msub r r (- ds (* v v)))]\n     (if (>= d 0.0)\n       (let [d (Math/sqrt d)\n             a (+ v d)\n             b (- v d)]\n         (if-not (and (< a 0) (< b 0))\n           (if (and (> a 0) (> b 0))\n             (if (> a b) [b a] [a b])\n             (if (> b 0) [b a] [a b]))\n           [a b]))))))\n\n;; Source: http://geomalgorithms.com/a06-_intersect-2.html\n\n(defn intersect-ray-triangle3?\n  [p d a b c]\n  (let [u (m/- b a)\n        v (m/- c a)\n        n (m/cross u v)]\n    (if (m/delta= V3 n)\n      {:type :degenerate}\n      (let [w0 (m/- p a)\n            a' (- (m/dot n w0))\n            b' (m/dot n d)]\n        (if (m/delta= 0.0 b')\n          (if (m/delta= 0.0 a')\n            {:type :same-plane}\n            {:type :no-intersect})\n          (let [r (/ a' b')]\n            (if (< r 0.0)\n              {:type :no-intersect}\n              (let [i (m/madd d r p)\n                    [u v w] (gu/triangle-barycentric-coords a b c i u v)]\n                (if (and (>= u 0.0) (>= w 0.0) (m/in-range? 0.0 1.0 v))\n                  {:type :intersect :p i}\n                  {:type :no-intersect :p i})))))))))\n\n;; Source:\n;; http://fileadmin.cs.lth.se/cs/Personal/Tomas_Akenine-Moller/code/tribox3.txt\n\n(defn- triaabb-axis-test\n  [pa1 pb1 pa2 pb2 a b fa fb sa sb]\n  (let [q (mm/madd a pa1 b pb1)\n        r (mm/madd a pa2 b pb2)\n        [min max] (if (< q r) [q r] [r q])\n        rad (mm/madd fa sa fb sb)]\n    (if (<= min rad) (>= max (- rad)))))\n\n(defn- triaabb-edge-test-e0\n  [[ax ay az :as a] [bx by bz :as b] [cx cy cz] [ex ey ez :as e] [sx sy sz]]\n  (let [[fx fy fz] (m/abs e)]\n    (if (triaabb-axis-test ay az cy cz ez (- ey) fz fy sy sz)\n      (if (triaabb-axis-test ax az cx cz (- ez) ex fz fx sx sz)\n        (triaabb-axis-test bx by cx cy ey (- ex) fy fx sx sy)))))\n\n(defn- triaabb-edge-test-e1\n  [[ax ay az] [bx by bz :as b] [cx cy cz :as c] [ex ey ez :as e] [sx sy sz]]\n  (let [[fx fy fz] (m/abs e)]\n    (if (triaabb-axis-test ay az cy cz ez ey fz fy sy sz)\n      (if (triaabb-axis-test ax az cx cz (- ez) ex fz fx sx sz)\n        (triaabb-axis-test ax ay bx by ey (- ex) fy fx sx sy)))))\n\n(defn- triaabb-edge-test-e2\n  [[ax ay az :as a] [bx by bz] [cx cy cz :as c] [ex ey ez :as e] [sx sy sz]]\n  (let [[fx fy fz] (m/abs e)]\n    (if (triaabb-axis-test ay az by bz ez (- ey) fz fy sy sz)\n      (if (triaabb-axis-test ax az bx bz (- ez) ex fz fx sx sz)\n        (triaabb-axis-test bx by cx cy ey (- ex) fy fx sx sy)))))\n\n(defn- triaabb-edge-minmax\n  [a b c s]\n  (if (< (min (min a b) c) s)\n    (>= (max (max a b) c) (- s))))\n\n(defn intersect-triangle3-aabb?\n  [a b c p s]\n  (let [[sx sy sz :as s] (m/* s 0.5)\n        p (m/+ p s)\n        [ax ay az :as a] (m/- a p)\n        [bx by bz :as b] (m/- b p)\n        [cx cy cz :as c] (m/- c p)\n        e0 (m/- b a)\n        e1 (m/- c b)]\n    (if (triaabb-edge-test-e0 a b c e0 s)\n      (if (triaabb-edge-test-e1 a b c e1 s)\n        (if (triaabb-edge-test-e2 a b c (m/- a c) s)\n          (if (triaabb-edge-minmax ax bx cx sx)\n            (if (triaabb-edge-minmax ay by cy sy)\n              (if (triaabb-edge-minmax az bz cz sz)\n                (intersect-plane-aabb? a (m/cross e0 e1) s)))))))))\n\n(defn intersect-line2-line2?\n  [[px1 py1 :as p] [qx1 qy1 :as q]\n   [px2 py2 :as lp] [qx2 qy2 :as lq]]\n  (let [dx1 (- qx1 px1), dy1 (- qy1 py1)\n        dx2 (- qx2 px2), dy2 (- qy2 py2)\n        dx12 (- px1 px2), dy12 (- py1 py2)\n        denom (mm/msub dy2 dx1 dx2 dy1)\n        na (mm/msub dx2 dy12 dy2 dx12)\n        nb (mm/msub dx1 dy12 dy1 dx12)]\n    (if (zero? denom)\n      (if (and (zero? na) (zero? nb))\n        (let [ip (gu/closest-point-on-segment lp p q)\n              iq (gu/closest-point-on-segment lq p q)]\n          (if (or (m/delta= ip lp) (m/delta= iq lq))\n            {:type :coincident :p ip :q iq}\n            {:type :coincident-no-intersect :p ip :q iq}))\n        {:type :parallel})\n      (let [ua (/ na denom)\n            ub (/ nb denom)\n            i (m/mix p q ua)]\n        (if (and (>= ua 0.0) (<= ua 1.0) (>= ub 0.0) (<= ub 1.0))\n          {:type :intersect :p i :ua ua :ub ub}\n          {:type :intersect-outside :p i :ua ua :ub ub})))))\n\n(defn intersect-line2-edges?\n  [rp rq edges]\n  (->> edges\n       (transduce\n        (comp\n         (map (fn [[p q]] (intersect-line2-line2? rp rq p q)))\n         (filter #(if (get % :p) (get #{:intersect :coincident} (get % :type)))))\n        (completing\n         (fn [closest isec]\n           (let [p (get isec :p)\n                 d (g/dist-squared rp p)]\n             (if (< d (closest 1)) [p d] closest))))\n        [nil m/INF+])\n       (first)))\n\n(defn intersect-ray2-edges?\n  [rp rd edges]\n  (intersect-line2-edges? rp (m/madd rd 1e29 rp) edges))\n\n(defn intersect-plane-plane?\n  [an aw bn bw]\n  (when-not (or (m/delta= aw bw *eps*) (m/delta= an bn *eps*))\n    (let [od (m/dot an bn)\n          det (/ (mm/madd od od -1))\n          u (* (mm/madd bw od aw) det)\n          v (* (mm/madd aw od bw) det)]\n      {:p (m/madd an u (m/* bn v)) :dir (gu/ortho-normal an bn)})))\n\n(defn intersect-ray-plane?\n  [rp dir n w]\n  (let [dp (m/dot n dir)\n        dn (+ (m/dot n rp) w)]\n    (if (m/delta= 0.0 dp *eps*)\n      {:type (if (zero? dn) :on-plane :parallel)}\n      (let [du (- (/ dn dp))\n            i (m/madd dir du rp)]\n        (if (m/in-range? 0.0 1.0 du)\n          {:type :intersect :p i}\n          {:type :intersect-outside :p i})))))\n\n;; Source:\n;; http://fileadmin.cs.lth.se/cs/Personal/Tomas_Akenine-Moller/code/tribox3.txt\n\n(defn intersect-plane-aabb?\n  \"Takes a point & normal defining a plane and 2 vectors defining an\n  AABB (min-p & size). Returns true if plane intersects box.\"\n  ([p n q s]\n   (let [s2 (m/* s 0.5)]\n     (intersect-plane-aabb? (m/- p (m/+ q s2)) n s2)))\n  ([[px py pz] [nx ny nz :as n] [sx sy sz]]\n   (let [[vx1 vx2] (if (pos? nx) [(- (- sx) px) (- sx px)] [(- sx px) (- (- sx) px)])\n         [vy1 vy2] (if (pos? ny) [(- (- sy) py) (- sy py)] [(- sy py) (- (- sy) py)])\n         [vz1 vz2] (if (pos? nz) [(- (- sz) pz) (- sz pz)] [(- sz pz) (- (- sz) pz)])]\n     (if (<= (mm/madd nx vx1 ny vy1 nz vz1) 0.0)\n       (>= (mm/madd nx vx2 ny vy2 nz vz2) 0.0)))))\n\n(defn intersect-plane-sphere?\n  [n w p r] (<= (m/abs* (+ (m/dot n p) w)) r))\n\n;; Tetrahedron intersection\n;; https://gist.github.com/postspectacular/9021724\n;; http://vcg.isti.cnr.it/Publications/2003/GPR03/fast_tetrahedron_tetrahedron_overlap_algorithm.pdf\n\n(defn- subdot\n  \"Computes sum((a-b)*c), where a, b, c are 3D vectors.\"\n  [a b c] (let [d (m/subm a b c)] (mm/add (d 0) (d 1) (d 2))))\n\n(defn- face-a\n  \"Takes a transformation fn and the 4 delta vectors between tetra1/tetra2.\n    Returns 2-elem vec of [bitmask affine-coords].\"\n  [f deltas]\n  (let [aff (mapv f deltas)]\n    [(mm/bitmask pos? (aff 0) (aff 1) (aff 2) (aff 3)) aff]))\n\n(defn- face-b1?\n  \"Takes the 4 delta vectors between tetra2/tetra1 and a normal.\n    Returns true if all dot products are positive.\"\n  [deltas n] (every? #(pos? (m/dot % n)) deltas))\n\n(defn- face-b2?\n  \"Like face-b1?, but optimized for last face of tetrahedron.\"\n  [verts refv n] (every? #(pos? (subdot % refv n)) verts))\n\n(defn- edge-a\n  \"Takes 2 bitmasks and edge flags, returns true if there's a\n    separating plane between the faces shared by that edge.\"\n  [ma mb ea eb]\n  (let [xa (bit-and ma (bit-xor ma mb))\n        xb (bit-and mb (bit-xor xa mb))\n        edge (fn [a b i j]\n               (let [cp (mm/msub (ea i) (eb j) (ea j) (eb i))]\n                 (or (and (pos? cp) (pos? (bit-or xa a)) (pos? (bit-or xb b)))\n                     (and (neg? cp) (pos? (bit-or xa b)) (pos? (bit-or xb a))))))]\n    (not\n     (or\n      (not= 15 (bit-or ma mb))\n      (edge 1 2 1 0)\n      (edge 1 4 2 0)\n      (edge 1 8 3 0)\n      (edge 2 4 2 1)\n      (edge 2 8 3 1)\n      (edge 4 8 3 2)))))\n\n(defn- get-edge\n  \"Lazy edge evaluation. Takes a vector of edges, vector of edge\n    points and an edge id. Looks up edge for given id and if not yet\n    present constructs it. Returns 2-elem vector of [edges edge].\"\n  [edges epoints id]\n  (let [e (edges id)]\n    (if e\n      [edges e]\n      (let [ep (epoints id), e (m/- (ep 0) (ep 1))]\n        [(assoc edges id e) e]))))\n\n(defn- check-faces-a\n  \"Takes the 4 delta vectors between the two tetras, edge definitions\n    of the 1st tetra, vertices of the 2nd, a reference point of the 1st\n    and a seq of specs, each encoding a specific check (either calls to\n    face-a* or edge-a). Returns vector of bitmasks or nil if fail early.\"\n  [deltas epoints verts p specs]\n  (loop [masks [], affine [], edges [nil nil nil nil nil], s specs]\n    (if s\n      (let [[f a b] (first s)]\n        (if (or (= :f f) (= :f* f))\n          (let [[edges ea] (get-edge edges epoints a)\n                [edges eb] (get-edge edges epoints b)\n                n (m/cross ea eb)\n                [m a] (if (= :f f)\n                        (face-a #(m/dot % n) deltas)\n                        (face-a #(subdot % p n) verts))]\n            (if (< m 15)\n              (recur (conj masks m) (conj affine a) edges (next s))))\n          (if-not (edge-a (masks a) (masks b) (affine a) (affine b))\n            (recur masks affine edges (next s)))))\n      masks)))\n\n(defn- check-faces-b\n  \"Much like check-faces-a, but for 2nd tetra and specs encoding calls to face-b1/2?.\n    Returns true if tetras do intersect.\"\n  [deltas epoints verts p specs]\n  (loop [edges [nil nil nil nil nil], s specs]\n    (if s\n      (let [[f a b] (first s)\n            [edges ea] (get-edge edges epoints a)\n            [edges eb] (get-edge edges epoints b)]\n        (if-not (if (= :f f)\n                  (face-b1? deltas (m/cross ea eb))\n                  (face-b2? verts p (m/cross ea eb)))\n          (recur edges (next s))))\n      true)))\n\n(defn intersect-tetrahedra?\n  \"Takes 2 seqs of 4 3D points, each defining a tetrahedron. Returns\n    true if they intersect. Orientation of points is irrelevant (unlike\n    in the original algorithm this implementation is based on).\"\n  [[pa pb pc pd :as p] [qa qb qc qd :as q]]\n  (let [masks (check-faces-a\n               (map #(m/- % pa) q)\n               [[pb pa] [pc pa] [pd pa] [pc pb] [pd pb]]\n               q pb [[:f 0 1] [:f 2 0] [:e 0 1] [:f 1 2]\n                     [:e 0 2] [:e 1 2] [:f* 4 3] [:e 0 3]\n                     [:e 1 3] [:e 2 3]])]\n    (if masks\n      (or (not= 15 (reduce bit-or masks))\n          (check-faces-b\n           (map #(m/- % qa) p)\n           [[qb qa] [qc qa] [qd qa] [qc qb] [qd qb]]\n           p qb [[:f 0 1] [:f 2 0] [:f 1 2] [:f* 4 3]])))))\n"]}